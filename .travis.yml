language: go
go:
- 1.13.x
- 1.14.x
- 1.15.x
dist: bionic
services:
- docker
install:
- go get -u golang.org/x/lint/golint
- pip3 install boto3 markdown2
addons:
  apt:
    packages:
    - python3-pip
    - python3-setuptools
    - python3-wheel
script:
- make lint
- make
- make integration
- make test
- ./test/perf.sh "$TEST_CONNECTION_STRING_1" ||  ./test/perf.sh "$TEST_CONNECTION_STRING_2"
- make fakepackage
- docker build -t e2e_tests -f docker/Dockerfile.mule .
- docker run --rm -t e2e_tests mule/e2e.sh
env:
  global:
  - secure: PtDC6ryd4+X4R+s3yzJtJOZjboQS8xyasK4DPSvSEDAFq6p3z+U+q+rNixLRcM4kmBE0IpYlpnHttyZCMfjCOCmMp3UMyiSa17MwapvKkSCjW0h0AVci1t9fCOB2EGbkjCUYvQziLEKmpcFqdQKyD0Od6AN/PVC11FGGXDE2bfMzhtAew3oVTeG9KmxtypIWSQ+Xc1BLjv5jdQLVvziniSFviyeCGfrX7owk+fiOYlc3wSm8GGOYw8lwUPDq4XGxGgHpTnbP8wVq8Jxu+mpKNnYNnLx6HfbImsR6vqezh/RZ2T+p4FA5al58AoVPQBvZEqk1E3FDVyFPxIYtVAluq2zu9RKggXoNIubjoEyYgO7rk5Sv9bP9nNmsAjty+BNZeaUKQkH6sb0XVWqNedwXR/he0CKUS6L6GBcnCugiMKgK1fH08gYBjS1pXg/zQK5ZdBX/kTxWMk3VQ49lmpzIxgR87ewj8mbC5sWrXOt8179rmkcIOQQaLsFIm91TO01vnJ2ZYxfP9Yn5uaw0McolMvGp2gSD3mvw70M5bGgzWxCnXHDUoORlsNt2NRQpU6/dhgQJZjksKMoe+PqRjzdmHLAbly2+vOzWAsA7TNe6BkKIgYv1L3TR0TVdTdDAsLDsGgjk8XdMoyfseT8ISgKprPaQdZSmUltziN/992B6nmI=
  - secure: Ji69T6NoAWueZQiYl9s0BowCqC9x+HVMSa87G3KRNCvvUEJbWfcWdVA4SZYTwVCml8ie6fOhbFdLImvDf5xSzQ6gvrYpt/ZwZ98nPvSv51rNgwO/DhbhzridnJg7Was+j8oGpHA12RSBzQJ7jr52tEjiH3f5QErlBDXpqdb60MmZz6u12YT+IOmehfzqE14Pg5tOwlxDPTguAGt3bvgzLl7PnA6mAZ45BY0tGI0T4Hg2MQbi5XkYkSY/C7c/Rgl5Otz56aw/Cvz55rVt3vH9eILg5r+LwAlRr+9JzVxa4OjgW6pBVLzxDG0clQvMYogL0muTg9AuWB0mWdU6bURxyYpH6/TfOiOiZrYnvm73MxnZD0voJc8xrx0VF/b2lCm+38O1Ec6eORXMSZF2l2+6vE37lMOpTmf3x5G069M4kuzULbtIcnPv1j5xe/qfP0lNpAfbBJ8J8HZCAF5ZHr5FbbpnAn5ufeg+ajgbrE4HtpKrU8ndYrdqPNGuw+HZpDNs27pynMkzorh8rXJTUjJO84GyHL9E+psF8whiw6bbRx89SWikJiSuFGsZzSMkdDxjw3Ho3dxuSnAERB8rHSXdAoWfhlcnGOyRkyUdORYvuR0ocoCSHOq/z7trxC6lWSuOnhlcfDU426aLMaF5e3xbT4bSNT7m3R73UYAznoXGQg4=
